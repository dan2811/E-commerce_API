{"ast":null,"code":"import _asyncToGenerator from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29;import _regeneratorRuntime from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/regenerator/index.js\";import styled from\"styled-components\";import Announcement from\"../components/Announcement\";import Footer from\"../components/Footer\";import Navbar from\"../components/Navbar\";import{Add,Remove}from\"@mui/icons-material\";import{mobile}from\"../responsive\";import{useSelector,useDispatch}from\"react-redux\";import StripeCheckout from\"react-stripe-checkout\";import{useEffect,useState}from\"react\";import{userRequest}from\"../requestMethods\";import{useNavigate,Link}from\"react-router-dom\";import{decrementQuantity,incrementQuantity,removeProduct}from\"../redux/cartRedux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var KEY=process.env.REACT_APP_STRIPE_KEY;var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\npadding: 20px;\\n\",\"\\n\\n\"])),mobile({padding:\"10px\"}));var Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nfont-weight: 300;\\ntext-align: center;\\n\"])));var Top=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nalign-items: center;\\njustify-content: center;\\npadding: 20px;\\n\"])));var TopButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\npadding: 10px;\\nmargin: 20px;\\nfont-weight: 600;\\ncursor: pointer;\\nborder: \",\";\\nbackground-color: \",\";\\ncolor: \",\";\\n\"])),function(props){return props.type===\"filled\"&&\"none\";},function(props){return props.type===\"filled\"?\"black\":\"transparent\";},function(props){return props.type===\"filled\"&&\"white\";});var TopTexts=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n\",\"\\n\\n\"])),mobile({display:\"none\"}));var TopText=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\ntext-decoration: underline;\\ncursor: pointer;\\nmargin: 0px 10px;\\n\"])));var Bottom=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\ndisplay: flex;\\njustify-content: space-between;\\n\",\"\\n\\n\"])),mobile({flexDirection:\"column\"}));var Info=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\nflex: 3;\\n\"])));var Product=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\nborder-bottom: 3px solid #eee;\\nmargin-bottom: 30px;\\npadding-bottom: 30px;\\ndisplay: flex;\\njustify-content: space-between;\\n\",\"\\n\"])),mobile({flexDirection:\"column\"}));var ProductDetail=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\nflex: 2;\\ndisplay: flex;\\n\"])));var Image=styled.img(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\nwidth: 150px;\\n\"])));var Details=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\npadding: 20px;\\ndisplay: flex;\\nflex-direction: column;\\njustify-content: space-around;\"])));var ProductName=styled.span(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\"])));var ProductId=styled.span(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\"])));var ProductColor=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\nwidth: 20px;\\nheight: 20px;\\nborder-radius: 50%;\\nbackground-color: \",\";\\nborder: 1px solid black;\\n\"])),function(props){return props.color;});var ProductSize=styled.span(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\"])));var PriceDetail=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\nflex: 2;\\ndisplay: flex;\\nalign-items: center;\\njustify-content: center;\\nflex-direction: column;\\n\"])));var ProductAmountContainer=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nalign-items: center;\\nmargin-bottom: 20px;\\n\"])));var ProductAmount=styled.div(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\nfont-size: 24px;\\nmargin: 5px;\\n\",\"\\n\\n\"])),mobile({margin:\"5px 15px\"}));var ProductPrice=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\nfont-size: 30px;\\nfont-weight: 200;\\n\",\"\\n\\n\"])),mobile({marginBottom:\"20px\"}));var Summary=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\nflex: 1;\\nborder: 0.5px solid lightgray;\\nborder-radius: 10px;\\npadding: 20px;\\nheight: 50vh;\\n\"])));var SummaryTitle=styled.h1(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\nfont-weight: 200;\\n\"])));var SummaryItem=styled.div(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\nmargin: 30px 0px;\\ndisplay: flex;\\njustify-content: space-between;\\nfont-weight: \",\";\\nfont-size: \",\";\\n\"])),function(props){return props.type===\"total\"&&\"500\";},function(props){return props.type===\"total\"&&\"24px\";});var SummaryItemText=styled.span(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n\\n\"])));var SummaryItemPrice=styled.span(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\"])));var Button=styled.button(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\nwidth: 100%;\\npadding: 10px;\\nbackground-color: black;\\ncolor: white;\\nfont-weight: 600;\\n\"])));var DeleteButton=styled.button(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\npadding: 10px;\\nbackground-color: black;\\nmargin-top: 10px;\\ncolor: white;\\nfont-weight: 600;\\n\"])));var StyledLink=styled(Link)(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\ntext-decoration: none;\\ncolor: black;\\n\\n&:focus, &:hover, &:visited, &:link, &:active {\\n    text-decoration: none;\\n}\\n\"])));var Cart=function Cart(){var _cart$products;var cart=useSelector(function(state){return state.cart;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stripeToken=_useState2[0],setStripeToken=_useState2[1];var navigate=useNavigate();var dispatch=useDispatch();var onToken=function onToken(token){setStripeToken(token);};var handleRemove=function handleRemove(idx){dispatch(removeProduct(idx));};var handleIncrement=function handleIncrement(idx){dispatch(incrementQuantity(idx));};var handleDecrement=function handleDecrement(idx){if(cart.products[idx].quantity===1){dispatch(removeProduct(idx));}else{dispatch(decrementQuantity(idx));}};useEffect(function(){var makeRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post(\"/checkout/payment\",{tokenId:stripeToken.id,amount:cart.total*100});case 3:res=_context.sent;navigate(\"/success\",{state:{stripeData:res.data,cart:cart}});_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function makeRequest(){return _ref.apply(this,arguments);};}();stripeToken&&cart.total>=1&&makeRequest();},[stripeToken,cart,navigate]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Announcement,{}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(Title,{children:[cart.products.length>0?\"YOUR BASKET\":\"YOUR BASKET IS EMPTY!\",\" \"]}),/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(StyledLink,{to:'/',children:/*#__PURE__*/_jsx(TopButton,{children:\"CONTINUE SHOPPING\"})}),/*#__PURE__*/_jsx(TopTexts,{children:/*#__PURE__*/_jsx(StyledLink,{to:\"/wishlist\",children:/*#__PURE__*/_jsx(TopButton,{children:\"WISH LIST\"})})})]}),cart.products.length>0?/*#__PURE__*/_jsxs(Bottom,{children:[/*#__PURE__*/_jsx(Info,{children:(_cart$products=cart.products)===null||_cart$products===void 0?void 0:_cart$products.map(function(product,idx){return/*#__PURE__*/_jsxs(Product,{children:[/*#__PURE__*/_jsxs(ProductDetail,{children:[/*#__PURE__*/_jsx(Image,{src:product.img}),/*#__PURE__*/_jsxs(Details,{children:[/*#__PURE__*/_jsxs(ProductName,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Item: \"}),product.title]}),/*#__PURE__*/_jsxs(ProductId,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"ID: \"}),product._id]}),/*#__PURE__*/_jsx(ProductColor,{color:product.color}),/*#__PURE__*/_jsxs(ProductSize,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Size: \"}),product.size]})]})]}),/*#__PURE__*/_jsxs(PriceDetail,{children:[/*#__PURE__*/_jsxs(ProductAmountContainer,{children:[/*#__PURE__*/_jsx(Remove,{onClick:function onClick(){return handleDecrement(idx);}}),/*#__PURE__*/_jsx(ProductAmount,{children:product.quantity}),/*#__PURE__*/_jsx(Add,{onClick:function onClick(){return handleIncrement(idx);}})]}),/*#__PURE__*/_jsxs(ProductPrice,{children:[\"\\xA3 \",product.price*product.quantity]}),/*#__PURE__*/_jsx(DeleteButton,{onClick:function onClick(){return handleRemove(idx);},id:product._id,children:\"REMOVE\"})]})]},idx);})}),/*#__PURE__*/_jsxs(Summary,{children:[/*#__PURE__*/_jsx(SummaryTitle,{children:\"ORDER SUMMARY\"}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"\\xA3 \",cart.total]})]}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Estimated Shipping\"}),/*#__PURE__*/_jsx(SummaryItemPrice,{children:\"\\xA3 5.99\"})]}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Shipping Discount\"}),/*#__PURE__*/_jsx(SummaryItemPrice,{children:\"\\xA3 -5.99\"})]}),/*#__PURE__*/_jsxs(SummaryItem,{type:\"total\",children:[/*#__PURE__*/_jsx(SummaryItemText,{children:\"Total\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[\"\\xA3 \",cart.total]})]}),/*#__PURE__*/_jsx(StripeCheckout,{name:\"SHOP.\",billingAddress:true,shippingAddress:true,description:\"Your total is $\".concat(cart.total,\".\"),amount:cart.total*100,token:onToken,stripeKey:KEY,currency:\"GBP\",children:/*#__PURE__*/_jsx(Button,{children:\"CHECKOUT\"})})]})]}):\"\"]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Cart;","map":{"version":3,"sources":["/Users/dan/Coding/E-commerce_API/E_commerce/src/pages/Cart.jsx"],"names":["styled","Announcement","Footer","Navbar","Add","Remove","mobile","useSelector","useDispatch","StripeCheckout","useEffect","useState","userRequest","useNavigate","Link","decrementQuantity","incrementQuantity","removeProduct","KEY","process","env","REACT_APP_STRIPE_KEY","Container","div","Wrapper","padding","Title","h1","Top","TopButton","button","props","type","TopTexts","display","TopText","span","Bottom","flexDirection","Info","Product","ProductDetail","Image","img","Details","ProductName","ProductId","ProductColor","color","ProductSize","PriceDetail","ProductAmountContainer","ProductAmount","margin","ProductPrice","marginBottom","Summary","SummaryTitle","SummaryItem","SummaryItemText","SummaryItemPrice","Button","DeleteButton","StyledLink","Cart","cart","state","stripeToken","setStripeToken","navigate","dispatch","onToken","token","handleRemove","idx","handleIncrement","handleDecrement","products","quantity","makeRequest","post","tokenId","id","amount","total","res","stripeData","data","length","map","product","title","_id","size","price"],"mappings":"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","sourcesContent":["import styled from \"styled-components\";\nimport Announcement from \"../components/Announcement\";\nimport Footer from \"../components/Footer\";\nimport Navbar from \"../components/Navbar\";\nimport { Add, Remove } from \"@mui/icons-material\";\nimport { mobile } from \"../responsive\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport { useEffect, useState } from \"react\";\nimport { userRequest } from \"../requestMethods\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { decrementQuantity, incrementQuantity, removeProduct } from \"../redux/cartRedux\";\n\n\nconst KEY = process.env.REACT_APP_STRIPE_KEY;\n\nconst Container = styled.div``;\n\nconst Wrapper = styled.div`\npadding: 20px;\n${mobile({ padding: \"10px\"})}\n\n`;\n\nconst Title = styled.h1`\nfont-weight: 300;\ntext-align: center;\n`;\n\nconst Top = styled.div`\ndisplay: flex;\nalign-items: center;\njustify-content: center;\npadding: 20px;\n`;\n\nconst TopButton = styled.button`\npadding: 10px;\nmargin: 20px;\nfont-weight: 600;\ncursor: pointer;\nborder: ${props=>props.type === \"filled\" && \"none\"};\nbackground-color: ${props=>\n    props.type === \"filled\" ? \"black\" : \"transparent\"};\ncolor: ${props=>props.type === \"filled\" && \"white\"};\n`;\n\nconst TopTexts = styled.div`\n${mobile({ display: \"none\"})}\n\n`;\nconst TopText = styled.span`\ntext-decoration: underline;\ncursor: pointer;\nmargin: 0px 10px;\n`;\n\n\nconst Bottom = styled.div`\ndisplay: flex;\njustify-content: space-between;\n${mobile({ flexDirection: \"column\"})}\n\n`;\n\nconst Info = styled.div`\nflex: 3;\n`;\n\nconst Product = styled.div`\nborder-bottom: 3px solid #eee;\nmargin-bottom: 30px;\npadding-bottom: 30px;\ndisplay: flex;\njustify-content: space-between;\n${mobile({ flexDirection: \"column\"})}\n`;\n\nconst ProductDetail = styled.div`\nflex: 2;\ndisplay: flex;\n`;\n\nconst Image = styled.img`\nwidth: 150px;\n`;\n\nconst Details = styled.div`\npadding: 20px;\ndisplay: flex;\nflex-direction: column;\njustify-content: space-around;`;\n\nconst ProductName = styled.span``;\n\nconst ProductId = styled.span``;\n\nconst ProductColor = styled.div`\nwidth: 20px;\nheight: 20px;\nborder-radius: 50%;\nbackground-color: ${props=>props.color};\nborder: 1px solid black;\n`;\n\nconst ProductSize = styled.span``;\n\nconst PriceDetail = styled.div`\nflex: 2;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\nflex-direction: column;\n`;\n\nconst ProductAmountContainer = styled.div`\ndisplay: flex;\nalign-items: center;\nmargin-bottom: 20px;\n`;\n\nconst ProductAmount = styled.div`\nfont-size: 24px;\nmargin: 5px;\n${mobile({ margin: \"5px 15px\"})}\n\n`;\n\nconst ProductPrice = styled.div`\nfont-size: 30px;\nfont-weight: 200;\n${mobile({ marginBottom: \"20px\"})}\n\n`;\n\nconst Summary = styled.div`\nflex: 1;\nborder: 0.5px solid lightgray;\nborder-radius: 10px;\npadding: 20px;\nheight: 50vh;\n`;\n\nconst SummaryTitle = styled.h1`\nfont-weight: 200;\n`;\n\nconst SummaryItem = styled.div`\nmargin: 30px 0px;\ndisplay: flex;\njustify-content: space-between;\nfont-weight: ${props=>props.type === \"total\" && \"500\"};\nfont-size: ${props=>props.type === \"total\" && \"24px\"};\n`;\n\nconst SummaryItemText = styled.span`\n\n`;\n\nconst SummaryItemPrice = styled.span``;\n\nconst Button = styled.button`\nwidth: 100%;\npadding: 10px;\nbackground-color: black;\ncolor: white;\nfont-weight: 600;\n`;\n\nconst DeleteButton = styled.button`\npadding: 10px;\nbackground-color: black;\nmargin-top: 10px;\ncolor: white;\nfont-weight: 600;\n`;\n\nconst StyledLink = styled(Link)`\ntext-decoration: none;\ncolor: black;\n\n&:focus, &:hover, &:visited, &:link, &:active {\n    text-decoration: none;\n}\n`;\n\n\nconst Cart = () => {\n    const cart = useSelector((state) => state.cart);\n    const [stripeToken, setStripeToken] = useState(null);\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const onToken = (token) =>{\n        setStripeToken(token);\n    };\n\n        const handleRemove = (idx) => {\n            dispatch(removeProduct(idx));\n        };    \n\n        const handleIncrement = (idx) => {\n            dispatch(incrementQuantity(idx));\n        };\n\n        const handleDecrement = (idx) => {\n            if(cart.products[idx].quantity === 1) {\n                dispatch(removeProduct(idx));\n            } else {\n                dispatch(decrementQuantity(idx));\n            }\n        };\n\n    useEffect(()=>{\n        const makeRequest = async ()=>{\n            try{\n                const res = await userRequest.post(\"/checkout/payment\", {\n                tokenId: stripeToken.id,\n                amount: cart.total*100,\n            });\n            navigate(\"/success\", {state:{\n                stripeData: res.data,\n                cart: cart\n        }});\n            }catch{}\n        };\n        stripeToken && cart.total >= 1 && makeRequest();\n    }, [stripeToken, cart, navigate]);\n\n\n    return (\n        <Container>\n            <Navbar />\n            <Announcement />\n            <Wrapper>\n                <Title>{ cart.products.length > 0 ? \"YOUR BASKET\" : \"YOUR BASKET IS EMPTY!\" } </Title>\n                <Top>\n                    <StyledLink to={'/'}>\n                    <TopButton>CONTINUE SHOPPING</TopButton>\n                    </StyledLink>\n                    <TopTexts>\n                        <StyledLink to={`/wishlist`}>\n                        <TopButton>WISH LIST</TopButton>\n                        </StyledLink>\n                    </TopTexts>\n                </Top>\n                {cart.products.length > 0 ? \n                <Bottom>\n                    <Info>\n                    {cart.products?.map((product, idx)=>(\n                        <Product key={idx}>\n                            <ProductDetail>\n                                <Image src={product.img} />\n                                <Details>\n                                    <ProductName><b>Item: </b>{product.title}</ProductName>\n                                    <ProductId><b>ID: </b>{product._id}</ProductId>\n                                    <ProductColor color={product.color}/>\n                                    <ProductSize><b>Size: </b>{product.size}</ProductSize>\n                                </Details>\n                            </ProductDetail>\n                            <PriceDetail>\n                                <ProductAmountContainer>\n                                    <Remove onClick={() => handleDecrement(idx)}/>\n                                        <ProductAmount>{product.quantity}</ProductAmount>\n                                    <Add onClick={() => handleIncrement(idx)}/>\n                                </ProductAmountContainer>\n                                <ProductPrice>£ {product.price*product.quantity}</ProductPrice>\n                                <DeleteButton onClick={() => handleRemove(idx)} id={product._id}>REMOVE</DeleteButton>\n                            </PriceDetail>\n                        </Product>\n                    ))}\n                    </Info>\n                    <Summary>\n                        <SummaryTitle>ORDER SUMMARY</SummaryTitle>\n                        <SummaryItem>\n                            <SummaryItemText>Subtotal</SummaryItemText>\n                            <SummaryItemPrice>£ {cart.total}</SummaryItemPrice>\n                        </SummaryItem>\n\n                        <SummaryItem>\n                            <SummaryItemText>Estimated Shipping</SummaryItemText>\n                            <SummaryItemPrice>£ 5.99</SummaryItemPrice>\n                        </SummaryItem>\n\n                        <SummaryItem>\n                            <SummaryItemText>Shipping Discount</SummaryItemText>\n                            <SummaryItemPrice>£ -5.99</SummaryItemPrice>\n                        </SummaryItem>\n\n                        <SummaryItem type=\"total\">\n                            <SummaryItemText>Total</SummaryItemText>\n                            <SummaryItemPrice>£ {cart.total}</SummaryItemPrice>\n                        </SummaryItem>\n                        <StripeCheckout\n                            name=\"SHOP.\"\n                            billingAddress\n                            shippingAddress\n                            description={`Your total is $${cart.total}.`}\n                            amount={cart.total*100}\n                            token={onToken}\n                            stripeKey={KEY}\n                            currency=\"GBP\"\n                        >\n                            <Button>CHECKOUT</Button>\n                            </StripeCheckout> \n                    </Summary>\n                </Bottom> : \"\" }\n            </Wrapper>\n            <Footer />\n        </Container>\n    )\n}\n\nexport default Cart\n"]},"metadata":{},"sourceType":"module"}