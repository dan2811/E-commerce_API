{"ast":null,"code":"import _toConsumableArray from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from\"react\";import styled from\"styled-components\";import Product from\"./Product\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\npadding: 20px;\\ndisplay: flex;\\nflex-wrap: wrap;\\njustify-content: space-between;\\n\"])));var Products=function Products(_ref){var cat=_ref.cat,filters=_ref.filters,sort=_ref.sort;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredProducts=_useState4[0],setFilteredProducts=_useState4[1];useEffect(function(){var isSubscribed=true;var getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(cat?\"https://backendapiecommerce.herokuapp.com/api/products?category=\".concat(cat):\"https://backendapiecommerce.herokuapp.com/api/products\");case 3:res=_context.sent;if(isSubscribed){setProducts(res.data);}_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getProducts(){return _ref2.apply(this,arguments);};}();getProducts();return function(){};},[]);useEffect(function(){cat&&setFilteredProducts(products.filter(function(item){return Object.entries(filters).every(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return item[key].includes(value);});}));},[products,cat,filters]);useEffect(function(){if(sort===\"newest\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.createdAt-b.createdAt;});});}else if(sort===\"asc\"){setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return a.price-b.price;});});}else{setFilteredProducts(function(prev){return _toConsumableArray(prev).sort(function(a,b){return b.price-a.price;});});}},[sort]);return/*#__PURE__*/_jsx(Container,{children:cat?filteredProducts.map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item._id);}):products.slice(0,8).map(function(item){return/*#__PURE__*/_jsx(Product,{item:item},item._id);})});};export default Products;","map":{"version":3,"sources":["/Users/dan/Coding/E-commerce_API/E_commerce/src/components/Products.jsx"],"names":["useState","useEffect","styled","Product","axios","Container","div","Products","cat","filters","sort","products","setProducts","filteredProducts","setFilteredProducts","isSubscribed","getProducts","get","res","data","filter","item","Object","entries","every","key","value","includes","prev","a","b","createdAt","price","map","_id","slice"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Product from \"./Product\";\nimport axios from \"axios\";\n\nconst Container = styled.div`\npadding: 20px;\ndisplay: flex;\nflex-wrap: wrap;\njustify-content: space-between;\n`\n\nconst Products = ({cat, filters, sort}) => {\n\n    const [products, setProducts] = useState([]);\n    const [filteredProducts, setFilteredProducts] = useState([]);\n\n    useEffect(() => {\n        let isSubscribed = true;\n        const getProducts = async () => {\n            try{\n                const res = await axios.get( cat ? `https://backendapiecommerce.herokuapp.com/api/products?category=${cat}`\n                                                    : \"https://backendapiecommerce.herokuapp.com/api/products\"\n                                                    );\n                    if (isSubscribed) {\n                        setProducts(res.data);\n                    }\n            } catch (err) {};\n        };\n            getProducts();\n        return () => {\n        };\n     }, []);\n\n     useEffect(() => {\n         cat && setFilteredProducts(\n             products.filter((item) => \n             Object.entries(filters).every(([key, value])=>\n             item[key].includes(value)\n             )\n             )\n         );\n     }, [products, cat, filters]);\n\n     useEffect(() => {\n         if(sort === \"newest\") {\n             setFilteredProducts((prev) =>\n                [...prev].sort((a, b) => a.createdAt - b.createdAt)\n                );\n         } else if ((sort === \"asc\")) {\n             setFilteredProducts((prev) =>\n             [...prev].sort((a, b) => a.price - b.price)\n             );\n         } else {\n            setFilteredProducts((prev) =>\n            [...prev].sort((a, b) => b.price - a.price)\n            );\n        }\n     }, [sort]);\n\n    return (\n        <Container>\n            {cat\n                ? filteredProducts.map( item => <Product item={item} key={item._id} />)\n                    : products\n                        .slice(0, 8)\n                        .map(item => <Product item={item} key={item._id} />)}\n        </Container>\n    )\n}\n\nexport default Products\n"]},"metadata":{},"sourceType":"module"}