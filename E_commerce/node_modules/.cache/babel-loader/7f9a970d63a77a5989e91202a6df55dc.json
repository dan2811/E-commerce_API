{"ast":null,"code":"import _asyncToGenerator from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18;import _regeneratorRuntime from\"/Users/dan/Coding/E-commerce_API/E_commerce/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import styled from\"styled-components\";import Footer from\"../components/Footer\";import Announcement from'../components/Announcement';import Navbar from'../components/Navbar';import{useEffect,useState}from'react';import{useSelector}from'react-redux';import{useLocation}from\"react-router\";import{Link}from'react-router-dom';import{userRequest}from'../requestMethods';import ReactLoading from'react-loading';import Product from'../components/Product';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\npostion: relative;\\n\"])));var LoadingWrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nheight: 50vh;\\ndisplay: flex;\\nflex-direction: column;\\nalign-items: center;\\njustify-content: center;\\n\"])));var Wrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nflex-direction: column;\\n\"])));var Title=styled.h1(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\nflex: 1;\\nalign-self: center;\\npadding: 10px 0px;\\n\"])));var OrderDetails=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\npadding: 20px;\\n\"])));var Middle=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\npadding: 20px;\\ndisplay: flex;\\nflex-direction: column;\"])));var ProductsContainer=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\npadding: 20px;\\ndisplay: flex;\\nflex-direction: column;\\nborder-bottom: 3px solid #eee;\\n\\n\"])));var Item=styled.span(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nflex-direction: row;\"])));var ProductDetails=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nflex: 4;\\nflex-direction: column;\\nline-height: 3;\\npadding: 20px;\\n\"])));var ProductName=styled.span(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n\\n\"])));var Color=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n\\n\"])));var Price=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\"])));var Quantity=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\"])));var Bottom=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\npadding: 20px;\\n\"])));var AddressHeading=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\nfont-weight: 600;\\npadding: 20px;\\n\"])));var AddressDetails=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\npadding-left: 40px;\\n\"])));var StyledLink=styled(Link)(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\ntext-decoration: none;\\ncolor: black;\\nalign-self: center;\\n\\n&:focus, &:hover, &:visited, &:link, &:active {\\n    text-decoration: none;\\n}\\n\"])));var Button=styled.button(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\npadding: 10px;\\nmargin: 20px;\\nfont-weight: 600;\\ncursor: pointer;\\nborder: none;\\nbackground-color: black;\\ncolor: white;\\n\"])));var Success=function Success(){var location=useLocation();var data=location.state.stripeData;var cart=location.state.cart;var currentUser=useSelector(function(state){return state.user.currentUser;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),orderId=_useState2[0],setOrderId=_useState2[1];useEffect(function(){var createOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post(\"/orders\",{userId:currentUser._id,products:cart.products.map(function(item){return{productId:item._id,quantity:item._quantity};}),amount:cart.total,address:data.billing_details.address});case 3:res=_context.sent;setOrderId(res.data._id);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function createOrder(){return _ref.apply(this,arguments);};}();data&&createOrder();},[cart,data,currentUser]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(Announcement,{}),orderId?/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"Order Received!\"}),/*#__PURE__*/_jsxs(OrderDetails,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Order Number:\"}),\" \",orderId]}),/*#__PURE__*/_jsxs(OrderDetails,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Order Total:\"}),\" \\xA3 \",cart.total]}),/*#__PURE__*/_jsxs(Middle,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Products:\"}),cart.products.map(function(item,idx){return/*#__PURE__*/_jsx(ProductsContainer,{children:/*#__PURE__*/_jsxs(Item,{children:[/*#__PURE__*/_jsx(Product,{item:item}),/*#__PURE__*/_jsxs(ProductDetails,{children:[/*#__PURE__*/_jsxs(ProductName,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Item:\"}),\" \",item.title]}),/*#__PURE__*/_jsxs(Color,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Color:\"}),\" \",item.color?item.color:\"N/A\"]}),/*#__PURE__*/_jsxs(Quantity,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Quantity:\"}),\" \",item.quantity]}),/*#__PURE__*/_jsxs(Price,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price:\"}),\" \",item.price]})]})]})},idx);})]}),/*#__PURE__*/_jsxs(Bottom,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Delivery Address:\"}),/*#__PURE__*/_jsx(AddressHeading,{children:\"Line 1:\"}),/*#__PURE__*/_jsx(AddressDetails,{children:data.billing_details.address.line1}),/*#__PURE__*/_jsx(AddressHeading,{children:\"Line 2:\"}),/*#__PURE__*/_jsx(AddressDetails,{children:data.billing_details.address.line2}),/*#__PURE__*/_jsx(AddressHeading,{children:\"Post Code:\"}),/*#__PURE__*/_jsx(AddressDetails,{children:data.billing_details.address.postal_code}),/*#__PURE__*/_jsx(AddressHeading,{children:\"City:\"}),/*#__PURE__*/_jsx(AddressDetails,{children:data.billing_details.address.city}),/*#__PURE__*/_jsx(AddressHeading,{children:\"Country:\"}),/*#__PURE__*/_jsx(AddressDetails,{children:data.billing_details.address.country})]}),/*#__PURE__*/_jsx(StyledLink,{to:'/',children:/*#__PURE__*/_jsx(Button,{children:\"CONTINUE SHOPPING\"})})]}):/*#__PURE__*/_jsxs(LoadingWrapper,{children:[\"Your order is being created, please wait...\",/*#__PURE__*/_jsx(ReactLoading,{type:'spin',color:'#0d0d0d',delay:10})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Success;","map":{"version":3,"sources":["/Users/dan/Coding/E-commerce_API/E_commerce/src/pages/Success.jsx"],"names":["React","styled","Footer","Announcement","Navbar","useEffect","useState","useSelector","useLocation","Link","userRequest","ReactLoading","Product","Container","div","LoadingWrapper","Wrapper","Title","h1","OrderDetails","Middle","ProductsContainer","Item","span","ProductDetails","ProductName","Color","Price","Quantity","Bottom","AddressHeading","AddressDetails","StyledLink","Button","button","Success","location","data","state","stripeData","cart","currentUser","user","orderId","setOrderId","createOrder","post","userId","_id","products","map","item","productId","quantity","_quantity","amount","total","address","billing_details","res","console","log","idx","title","color","price","line1","line2","postal_code","city","country"],"mappings":"q1BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,YAAP,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGZ,MAAM,CAACa,GAAV,uFAAf,CAIA,GAAMC,CAAAA,cAAc,CAAGd,MAAM,CAACa,GAAV,6KAApB,CAQA,GAAME,CAAAA,OAAO,CAAGf,MAAM,CAACa,GAAV,8GAAb,CAKA,GAAMG,CAAAA,KAAK,CAAGhB,MAAM,CAACiB,EAAV,wHAAX,CAMA,GAAMC,CAAAA,YAAY,CAAGlB,MAAM,CAACa,GAAV,qFAAlB,CAIA,GAAMM,CAAAA,MAAM,CAAGnB,MAAM,CAACa,GAAV,4HAAZ,CAKA,GAAMO,CAAAA,iBAAiB,CAAGpB,MAAM,CAACa,GAAV,gKAAvB,CAQA,GAAMQ,CAAAA,IAAI,CAAGrB,MAAM,CAACsB,IAAV,yGAAV,CAIA,GAAMC,CAAAA,cAAc,CAAGvB,MAAM,CAACsB,IAAV,yJAApB,CAQA,GAAME,CAAAA,WAAW,CAAGxB,MAAM,CAACsB,IAAV,yEAAjB,CAIA,GAAMG,CAAAA,KAAK,CAAGzB,MAAM,CAACa,GAAV,yEAAX,CAIA,GAAMa,CAAAA,KAAK,CAAG1B,MAAM,CAACa,GAAV,qEAAX,CAEA,GAAMc,CAAAA,QAAQ,CAAG3B,MAAM,CAACa,GAAV,qEAAd,CAEA,GAAMe,CAAAA,MAAM,CAAG5B,MAAM,CAACa,GAAV,uFAAZ,CAIA,GAAMgB,CAAAA,cAAc,CAAG7B,MAAM,CAACa,GAAV,0GAApB,CAKA,GAAMiB,CAAAA,cAAc,CAAG9B,MAAM,CAACa,GAAV,4FAApB,CAIA,GAAMkB,CAAAA,UAAU,CAAG/B,MAAM,CAACQ,IAAD,CAAT,qNAAhB,CAUA,GAAMwB,CAAAA,MAAM,CAAGhC,MAAM,CAACiC,MAAV,mMAAZ,CAWA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClB,GAAMC,CAAAA,QAAQ,CAAG5B,WAAW,EAA5B,CACA,GAAM6B,CAAAA,IAAI,CAAGD,QAAQ,CAACE,KAAT,CAAeC,UAA5B,CACA,GAAMC,CAAAA,IAAI,CAAGJ,QAAQ,CAACE,KAAT,CAAeE,IAA5B,CACA,GAAMC,CAAAA,WAAW,CAAGlC,WAAW,CAAC,SAAC+B,KAAD,QAAWA,CAAAA,KAAK,CAACI,IAAN,CAAWD,WAAtB,EAAD,CAA/B,CACA,cAA8BnC,QAAQ,CAAC,IAAD,CAAtC,wCAAOqC,OAAP,eAAgBC,UAAhB,eAEAvC,SAAS,CAAC,UAAM,CACZ,GAAMwC,CAAAA,WAAW,0FAAG,iLAEMnC,CAAAA,WAAW,CAACoC,IAAZ,CAAiB,SAAjB,CAA4B,CAC1CC,MAAM,CAAEN,WAAW,CAACO,GADsB,CAE1CC,QAAQ,CAAET,IAAI,CAACS,QAAL,CAAcC,GAAd,CAAkB,SAACC,IAAD,QAAW,CACnCC,SAAS,CAAED,IAAI,CAACH,GADmB,CAEnCK,QAAQ,CAAEF,IAAI,CAACG,SAFoB,CAAX,EAAlB,CAFgC,CAM1CC,MAAM,CAAEf,IAAI,CAACgB,KAN6B,CAO1CC,OAAO,CAAEpB,IAAI,CAACqB,eAAL,CAAqBD,OAPY,CAA5B,CAFN,QAENE,GAFM,eAWZf,UAAU,CAACe,GAAG,CAACtB,IAAJ,CAASW,GAAV,CAAV,CAXY,+EAaZY,OAAO,CAACC,GAAR,cAbY,oEAAH,kBAAXhB,CAAAA,WAAW,0CAAjB,CAgBAR,IAAI,EAAIQ,WAAW,EAAnB,CACH,CAlBQ,CAkBN,CAACL,IAAD,CAAOH,IAAP,CAAaI,WAAb,CAlBM,CAAT,CAqBA,mBACI,MAAC,SAAD,yBACI,KAAC,MAAD,IADJ,cAEI,KAAC,YAAD,IAFJ,CAGKE,OAAO,cACR,MAAC,OAAD,yBACI,KAAC,KAAD,8BADJ,cAII,MAAC,YAAD,yBACA,oCADA,KACsBA,OADtB,GAJJ,cAOI,MAAC,YAAD,yBACA,mCADA,UACuBH,IAAI,CAACgB,KAD5B,GAPJ,cAUI,MAAC,MAAD,yBACI,gCADJ,CAEKhB,IAAI,CAACS,QAAL,CAAcC,GAAd,CAAkB,SAACC,IAAD,CAAOW,GAAP,qBACnB,KAAC,iBAAD,wBACI,MAAC,IAAD,yBACA,KAAC,OAAD,EAAS,IAAI,CAAEX,IAAf,EADA,cAEA,MAAC,cAAD,yBACI,MAAC,WAAD,yBACI,4BADJ,KACkBA,IAAI,CAACY,KADvB,GADJ,cAII,MAAC,KAAD,yBACI,6BADJ,KACmBZ,IAAI,CAACa,KAAL,CAAab,IAAI,CAACa,KAAlB,CAA0B,KAD7C,GAJJ,cAOI,MAAC,QAAD,yBACI,gCADJ,KACsBb,IAAI,CAACE,QAD3B,GAPJ,cAUI,MAAC,KAAD,yBACI,6BADJ,KACmBF,IAAI,CAACc,KADxB,GAVJ,GAFA,GADJ,EAAwBH,GAAxB,CADmB,EAAlB,CAFL,GAVJ,cAmCI,MAAC,MAAD,yBACI,wCADJ,cAEI,KAAC,cAAD,sBAFJ,cAKA,KAAC,cAAD,WACKzB,IAAI,CAACqB,eAAL,CAAqBD,OAArB,CAA6BS,KADlC,EALA,cAQI,KAAC,cAAD,sBARJ,cAWA,KAAC,cAAD,WACK7B,IAAI,CAACqB,eAAL,CAAqBD,OAArB,CAA6BU,KADlC,EAXA,cAcI,KAAC,cAAD,yBAdJ,cAiBA,KAAC,cAAD,WACK9B,IAAI,CAACqB,eAAL,CAAqBD,OAArB,CAA6BW,WADlC,EAjBA,cAoBI,KAAC,cAAD,oBApBJ,cAuBA,KAAC,cAAD,WACK/B,IAAI,CAACqB,eAAL,CAAqBD,OAArB,CAA6BY,IADlC,EAvBA,cA0BI,KAAC,cAAD,uBA1BJ,cA6BA,KAAC,cAAD,WACKhC,IAAI,CAACqB,eAAL,CAAqBD,OAArB,CAA6Ba,OADlC,EA7BA,GAnCJ,cAqEI,KAAC,UAAD,EAAY,EAAE,CAAE,GAAhB,uBACA,KAAC,MAAD,gCADA,EArEJ,GADQ,cA2ER,MAAC,cAAD,uEAEI,KAAC,YAAD,EAAc,IAAI,CAAE,MAApB,CAA4B,KAAK,CAAE,SAAnC,CAA8C,KAAK,CAAE,EAArD,EAFJ,GA9EJ,cAmFI,KAAC,MAAD,IAnFJ,GADJ,CAuFH,CAnHD,CAqHA,cAAenC,CAAAA,OAAf","sourcesContent":["import React from 'react'\nimport styled from \"styled-components\";\nimport Footer from \"../components/Footer\";\nimport Announcement from '../components/Announcement';\nimport Navbar from '../components/Navbar';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from \"react-router\";\nimport { Link } from 'react-router-dom';\nimport { userRequest } from '../requestMethods';\nimport ReactLoading from 'react-loading';\nimport Product from '../components/Product';\n\nconst Container = styled.div`\npostion: relative;\n`;\n\nconst LoadingWrapper = styled.div`\nheight: 50vh;\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: center;\n`;\n\nconst Wrapper = styled.div`\ndisplay: flex;\nflex-direction: column;\n`;\n\nconst Title = styled.h1`\nflex: 1;\nalign-self: center;\npadding: 10px 0px;\n`;\n\nconst OrderDetails = styled.div`\npadding: 20px;\n`;\n\nconst Middle = styled.div`\npadding: 20px;\ndisplay: flex;\nflex-direction: column;`;\n\nconst ProductsContainer = styled.div`\npadding: 20px;\ndisplay: flex;\nflex-direction: column;\nborder-bottom: 3px solid #eee;\n\n`;\n\nconst Item = styled.span`\ndisplay: flex;\nflex-direction: row;`;\n\nconst ProductDetails = styled.span`\ndisplay: flex;\nflex: 4;\nflex-direction: column;\nline-height: 3;\npadding: 20px;\n`;\n\nconst ProductName = styled.span`\n\n`;\n\nconst Color = styled.div`\n\n`;\n\nconst Price = styled.div``;\n\nconst Quantity = styled.div``;\n\nconst Bottom = styled.div`\npadding: 20px;\n`;\n\nconst AddressHeading = styled.div`\nfont-weight: 600;\npadding: 20px;\n`;\n\nconst AddressDetails = styled.div`\npadding-left: 40px;\n`;\n\nconst StyledLink = styled(Link)`\ntext-decoration: none;\ncolor: black;\nalign-self: center;\n\n&:focus, &:hover, &:visited, &:link, &:active {\n    text-decoration: none;\n}\n`;\n\nconst Button = styled.button`\npadding: 10px;\nmargin: 20px;\nfont-weight: 600;\ncursor: pointer;\nborder: none;\nbackground-color: black;\ncolor: white;\n`;\n\n\nconst Success = () => {\n    const location = useLocation();\n    const data = location.state.stripeData;\n    const cart = location.state.cart;\n    const currentUser = useSelector((state) => state.user.currentUser);\n    const [orderId, setOrderId] = useState(null);\n\n    useEffect(() => {\n        const createOrder = async () => {\n            try {\n                const res = await userRequest.post(\"/orders\", {\n                    userId: currentUser._id,\n                    products: cart.products.map((item) => ({\n                        productId: item._id,\n                        quantity: item._quantity,\n                    })),\n                    amount: cart.total,\n                    address: data.billing_details.address,\n                });\n                setOrderId(res.data._id);\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        data && createOrder();\n    }, [cart, data, currentUser]);\n\n\n    return (\n        <Container>\n            <Navbar />\n            <Announcement />\n            {orderId ? \n            <Wrapper>\n                <Title>        \n                    Order Received!\n                </Title> \n                <OrderDetails>\n                <b>Order Number:</b> {orderId}\n                </OrderDetails>\n                <OrderDetails>\n                <b>Order Total:</b> £ {cart.total}\n                </OrderDetails>\n                <Middle>\n                    <b>Products:</b>\n                    {cart.products.map((item, idx) => (\n                    <ProductsContainer key={idx} >\n                        <Item>\n                        <Product item={item} /> \n                        <ProductDetails>\n                            <ProductName>\n                                <b>Item:</b> {item.title}\n                            </ProductName>\n                            <Color>\n                                <b>Color:</b> {item.color ? item.color : \"N/A\"}\n                            </Color>\n                            <Quantity>\n                                <b>Quantity:</b> {item.quantity}\n                            </Quantity>\n                            <Price>\n                                <b>Price:</b> {item.price}\n                            </Price>\n                        </ProductDetails>\n                        </Item>\n                    </ProductsContainer>\n                    ))\n                    }\n                </Middle>\n                <Bottom>\n                    <b>Delivery Address:</b>\n                    <AddressHeading>\n                    Line 1:\n                    </AddressHeading>\n                <AddressDetails>\n                    {data.billing_details.address.line1}\n                </AddressDetails>\n                    <AddressHeading>\n                    Line 2:\n                    </AddressHeading>\n                <AddressDetails>\n                    {data.billing_details.address.line2}\n                </AddressDetails>\n                    <AddressHeading>\n                    Post Code:\n                    </AddressHeading>\n                <AddressDetails>\n                    {data.billing_details.address.postal_code}\n                </AddressDetails>\n                    <AddressHeading>\n                    City:\n                    </AddressHeading>\n                <AddressDetails>\n                    {data.billing_details.address.city}\n                </AddressDetails>\n                    <AddressHeading>\n                    Country: \n                    </AddressHeading>\n                <AddressDetails>\n                    {data.billing_details.address.country}\n                </AddressDetails>\n\n                </Bottom>\n                <StyledLink to={'/'}>\n                <Button>CONTINUE SHOPPING</Button>\n                </StyledLink>\n            </Wrapper>\n            :\n            <LoadingWrapper>\n                Your order is being created, please wait...\n                <ReactLoading type={'spin'} color={'#0d0d0d'} delay={10} />\n            </LoadingWrapper>\n            }\n            <Footer />\n        </Container>\n    )\n}\n\nexport default Success\n"]},"metadata":{},"sourceType":"module"}